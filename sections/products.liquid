<div class="max-w-5xl mx-auto mt-10 px-5 lg:px-0 products-{{ section.id }}" id="app">
  <div class="grid grid-cols-4 gap-8">
    {% for product in collections.all.products %}
      <div class="bg-[#DECC99] rounded-lg px-6 flex flex-col h-full">
        <div class="flex justify-center mt-[-75px]">
          <img
            src="{{ product.featured_image | image_url: width: 150 }}"
            alt="{{ product.title }}"
            width="150"
            height="150"
          >
        </div>
        <div class="text-peanut-brown font-p22mackinac text-[26px] mb-3">{{ product.title }}</div>
        <div class="text-sm font-rubik text-peanut-brown flex-grow">
          {{ product.description }}
        </div>
        <div class="flex justify-between items-center mt-4">
          <div class="text-peanut-brown font-bold font-bannertype" v-html="formatPrice('{{ product.price | money }}')">
            {{ product.price | money }}
          </div>
          <form method="post" action="/cart/add" class="product-form" onsubmit="addToCart(event, this)">
            <input type="hidden" name="id" value="{{ product.variants.first.id }}">
            {% comment %} <input min="1" type="number" id="quantity" name="quantity" value="1"> {% endcomment %}
            <button
              type="submit"
              class="w-[40px] h-[40px] bg-[#FD2B53] rounded-full flex items-center justify-center cursor-pointer"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="white"
                stroke-width="4"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </form>
        </div>
      </div>
    {% endfor %}

    {% comment %}
      {% for product in collections.all.products %}
        <div class="product-card">
          {{ product.title }}
        </div>
      {% endfor %}
    {% endcomment %}
  </div>
</div>

<script>
  const { createApp } = Vue;

  createApp({
    methods: {
      formatPrice(price) {
        // Split the price into parts
        const [currency, amount] = price.split('€');
        const [whole, decimal] = amount.split(',');

        return `
          <span class="text-[28px]">€</span><span class="text-[56px]">${whole}</span><span class="text-[28px]">,${decimal}</span>
        `;
      },
    },
  }).mount('#app');
</script>
